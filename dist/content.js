const g=()=>{document.body.insertAdjacentHTML("afterbegin",'<div id="fireflyCursor"></div>');const t=document.querySelector("#firefly-cursor-root"),o=document.querySelector("#fireflyCursor");return t&&o.classList.add("itIsOptionRender"),o},p=t=>{if(t<=50){const o=t/50,e=Math.round(150+o*105),r=Math.round(200+o*55);return{r:e,g:r,b:255}}else{const o=(t-50)/50,e=255,r=Math.round(255-o*155),n=Math.round(255-o*255);return{r:e,g:r,b:n}}},M=(t,o=.2)=>({r:Math.min(255,Math.round(t.r+(255-t.r)*o)),g:Math.min(255,Math.round(t.g+(255-t.g)*o)),b:Math.min(255,Math.round(t.b+(255-t.b)*o))}),v=t=>{const o=p(t),e=M(o,.3);return{rgbDarker:o,rgbLighter:e}},c={temperature:50,opacity:30,size:30,microMotion:25,breathSpeed:50,followDelay:0,clickColorIntensity:50,isDarkMode:!0},h={breathSpeed:"1",isDarkMode:!0},y=t=>h[t],d=(t,o)=>{h[t]=o},k=()=>{const t=typeof chrome<"u"&&chrome.storage&&chrome.storage.sync;function o(e,r){let n=r;if(n===void 0&&(n=c[e]),e==="temperature"){const{rgbDarker:i,rgbLighter:s}=v(n);document.documentElement.style.setProperty("--pulse-from",`rgba(${i.r}, ${i.g}, ${i.b}, 1)`),document.documentElement.style.setProperty("--pulse-to",`rgba(${s.r}, ${s.g}, ${s.b}, 0.8)`)}if(e==="opacity"&&document.documentElement.style.setProperty("--opacity",(n/100).toFixed(2)),e==="size"&&document.documentElement.style.setProperty("--size-multiplier",(n/50).toFixed(2)),e==="microMotion"&&document.documentElement.style.setProperty("--drift-multiplier",(n/50).toFixed(2)),e==="breathSpeed"){const i=(n/50).toFixed(2);document.documentElement.style.setProperty("--breath-multiplier",i),d("breathSpeed",i)}e==="clickColorIntensity"&&d("clickColorIntensity",n),e==="followDelay"&&document.documentElement.style.setProperty("--follow-delay-multiplier",(n/50).toFixed(2)),e==="isDarkMode"&&d("isDarkMode",n)}if(!t){for(const e of Object.keys(c)){const r=localStorage.getItem(e),n=r!==null?JSON.parse(r):c[e];o(e,n)}window.addEventListener("firefly-storage",e=>{const{key:r,value:n}=e.detail;o(r,n)});return}chrome.storage.sync.get(Object.keys(c),e=>{for(const r of Object.keys(c)){const n=e[r]!==void 0?e[r]:c[r];o(r,n)}}),chrome.storage.onChanged.addListener((e,r)=>{if(r==="sync")for(const[n,i]of Object.entries(e))o(n,i.newValue)}),window.addEventListener("firefly-storage",e=>{const{key:r,value:n}=e.detail;r in c&&o(r,n)})},C=t=>{let o=0,e=0,r=null,n=!1;const i=()=>{t.style.transform=`translate(${o}px, ${e}px)`,r=null},s=a=>{e=a.clientY,o=a.clientX,n||(n=!0,t.classList.add("visible")),r||(r=requestAnimationFrame(i))},l=()=>{document.fullscreenElement?t.style.visibility="hidden":t.style.visibility="visible"};window.addEventListener("mousemove",s),document.addEventListener("fullscreenchange",l)},F=t=>{let o=null;const e=(i,s)=>{const l=Math.max(0,Math.min(100,i));let a=Math.floor(Math.random()*360);const u=Math.round(30+l/100*70),m=Math.round(85-l/100*35);return`${a}, ${u}%, ${m}%`},r=(i,s)=>{const l=y("breathSpeed"),a=y("clickColorIntensity"),f=Math.round(3e3/(l*.3+1));document.documentElement.style.setProperty("--breath-click-duration",`${f}ms`),document.documentElement.style.setProperty("--breath-multiplier",l);const b=e(a);s.style.setProperty("--random-pastelToVividColor",b),s.classList.remove("click"),clearTimeout(o),s.offsetWidth,s.classList.add("click"),o=setTimeout(()=>s.classList.remove("click"),f)};window.addEventListener("click",i=>r(i,t));const n=i=>{};chrome?.storage?.sync.get(["clickVibrantColor"],i=>{n(i.clickVibrantColor)}),chrome?.storage?.onChanged.addListener(i=>{i.clickVibrantColor!==void 0&&n(i.clickVibrantColor.newValue)})},S=()=>{const t=g();k(),C(t),F(t)};S();
